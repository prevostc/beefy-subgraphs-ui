fragment ProtocolMetrics on Protocol {
  totalValueLockedUSD
  activeVaultCount
  activeInvestorCount
  transactionCount
  harvestCount
}

fragment ProtocolSnapshotMetrics on ProtocolSnapshot {
  totalValueLockedUSD
  activeVaultCount
  activeInvestorCount
  newInvestorCount
  totalTransactionCount
  investorTransactionsCount
  harvesterTransactionsCount
  totalGasSpent
  totalGasSpentUSD
  investorGasSpent
  investorGasSpentUSD
  harvesterGasSpent
  harvesterGasSpentUSD
  protocolGasSaved
  protocolGasSavedUSD
  protocolFeesCollectedNative
  protocolFeesCollectedUSD
  harvesterFeesCollectedNative
  harvesterFeesCollectedUSD
  strategistFeesCollectedNative
  strategistFeesCollectedUSD
  zapFeesCollectedNative
  zapFeesCollectedUSD
}

fragment ProtocolSnapshot on ProtocolSnapshot {
  id
  period
  roundedTimestamp
  timestamp
  ...ProtocolSnapshotMetrics
}

query ProtocolDashboard {
  protocol(id: "0x01000000") {
    id
    name
    ...ProtocolMetrics
  }

  dailySnapshots: protocolSnapshots(
    where: { period: 86400 }
    orderBy: roundedTimestamp
    orderDirection: desc
    first: 30
  ) {
    ...ProtocolSnapshot
  }
}
